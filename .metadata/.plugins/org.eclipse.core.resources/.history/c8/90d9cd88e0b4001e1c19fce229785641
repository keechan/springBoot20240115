package com.korea.controller;

import java.util.Random;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;

import com.korea.test.logint.LogintServiceImpl;
import com.korea.test.logint.LogintVO;

@Controller
public class LogintController {
	@Autowired 
	LogintServiceImpl service;
	
	LogintController(){
		  System.out.println("=>LogintController ");	
	}
	
	@GetMapping("table.do")
	 String LogintRandomFormOk(LogintVO  vo) {		
	   System.out.println("===> table.do");
	  
	   for(int i=1;i<=5;i++ ) {
		   vo.setIdx1(i);
		   int leftLimit = 97; // letter 'a'
		   int rightLimit = 122; // letter 'z'
		   int targetStringLength = 5;
		   Random random = new Random();
		   String generatedString = random.ints(leftLimit, rightLimit + 1)
		           .limit(targetStringLength)
		           .collect(StringBuilder::new, StringBuilder::appendCodePoint, StringBuilder::append)
		           .toString();
		   vo.setName1(generatedString);
		   //System.out.println(generatedString);
		   
		   int leftNumber = 48; // letter 'a'
		   int rightNumber = 57; // letter 'z'
		   int targetNumberLength = 4;

		   String generatedNumber = random.ints(leftNumber, rightNumber + 1)
		           .limit(targetNumberLength)
		           .collect(StringBuilder::new, StringBuilder::appendCodePoint, StringBuilder::append)
		           .toString();
		   vo.setPwd1(generatedNumber);
		   //System.out.println(generatedNumber);		   
		   service.insertLogint(vo);
	   }
	   
	   return "redirect:index.do";
	}
}
